<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.Google.Auth.InstalledApplication</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Network.Google.Auth.InstalledApplication.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">gogol-0.3.0: Comprehensive Google Services SDK.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2015-2016 Brendan Hay</td></tr><tr><th>License</th><td>Mozilla Public License, v. 2.0.</td></tr><tr><th>Maintainer</th><td>Brendan Hay &lt;brendan.g.hay@gmail.com&gt;</td></tr><tr><th>Stability</th><td>provisional</td></tr><tr><th>Portability</th><td>non-portable (GHC extensions)</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.Google.Auth.InstalledApplication</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Forming the URL</a></li><li><a href="#g:2">Internal Exchange and Refresh</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Credentials for applications that are installed on devices such as
 computers, cell phones, or a tablet. Installed apps are distributed to
 individual machines, and it is assumed that these apps securely store secrets.</p><p>These apps might access a Google service while the user is present at the
 application, or when the application is running in the background.</p><p><em>See:</em> <a href="https://developers.google.com/identity/protocols/OAuth2InstalledApp">Installed Application Documentation</a>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:installedApplication">installedApplication</a> :: <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth.html#t:OAuthCode" title="Network.Google.Auth">OAuthCode</a> s -&gt; <a href="Network-Google-Auth.html#t:Credentials" title="Network.Google.Auth">Credentials</a> s</li><li class="src short"><span class="keyword">data</span> <a href="#t:AccessType">AccessType</a><ul class="subs"><li>= <a href="#v:Online">Online</a></li><li>| <a href="#v:Offline">Offline</a></li></ul></li><li class="src short"><a href="#v:redirectURI">redirectURI</a> :: <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a></li><li class="src short"><a href="#v:formURL">formURL</a> :: <a href="Network-Google-Auth-Scope.html#t:AllowScopes" title="Network.Google.Auth.Scope">AllowScopes</a> (s :: [<a href="../base-4.11.1.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>]) =&gt; <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; proxy s -&gt; <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a></li><li class="src short"><a href="#v:formAccessTypeURL">formAccessTypeURL</a> :: <a href="Network-Google-Auth-Scope.html#t:AllowScopes" title="Network.Google.Auth.Scope">AllowScopes</a> (s :: [<a href="../base-4.11.1.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>]) =&gt; <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; proxy s -&gt; <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a></li><li class="src short"><a href="#v:formURLWith">formURLWith</a> :: <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; [<a href="Network-Google-Auth.html#t:OAuthScope" title="Network.Google.Auth">OAuthScope</a>] -&gt; <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a></li><li class="src short"><a href="#v:formAccessTypeURLWith">formAccessTypeURLWith</a> :: <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; [<a href="Network-Google-Auth.html#t:OAuthScope" title="Network.Google.Auth">OAuthScope</a>] -&gt; <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a></li><li class="src short"><a href="#v:exchangeCode">exchangeCode</a> :: (<a href="../base-4.11.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, MonadCatch m) =&gt; <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth.html#t:OAuthCode" title="Network.Google.Auth">OAuthCode</a> s -&gt; <a href="Network-Google.html#t:Logger" title="Network.Google">Logger</a> -&gt; Manager -&gt; m (<a href="Network-Google-Auth.html#t:OAuthToken" title="Network.Google.Auth">OAuthToken</a> s)</li><li class="src short"><a href="#v:refreshToken">refreshToken</a> :: (<a href="../base-4.11.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, MonadCatch m) =&gt; <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth.html#t:OAuthToken" title="Network.Google.Auth">OAuthToken</a> s -&gt; <a href="Network-Google.html#t:Logger" title="Network.Google">Logger</a> -&gt; Manager -&gt; m (<a href="Network-Google-Auth.html#t:OAuthToken" title="Network.Google.Auth">OAuthToken</a> s)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:installedApplication" class="def">installedApplication</a> :: <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth.html#t:OAuthCode" title="Network.Google.Auth">OAuthCode</a> s -&gt; <a href="Network-Google-Auth.html#t:Credentials" title="Network.Google.Auth">Credentials</a> s <a href="src/Network.Google.Auth.InstalledApplication.html#installedApplication" class="link">Source</a> <a href="#v:installedApplication" class="selflink">#</a></p><div class="doc"><p>Create new Installed Application credentials.</p><p>Since it is intended that the user opens the URL generated by <code><a href="Network-Google-Auth-InstalledApplication.html#v:formURL" title="Network.Google.Auth.InstalledApplication">formURL</a></code> in a browser
 and the resulting <code><a href="Network-Google-Auth.html#t:OAuthCode" title="Network.Google.Auth">OAuthCode</a></code> is then received out-of-band,
 you must ensure that the scopes passed to <code><a href="Network-Google-Auth-InstalledApplication.html#v:formURL" title="Network.Google.Auth.InstalledApplication">formURL</a></code> and the type of <code><a href="Network-Google-Auth.html#t:OAuthCode" title="Network.Google.Auth">OAuthCode</a></code>
 correctly match, otherwise an authorization error will occur.</p><p>For example, doing this via <code><a href="../base-4.11.1.0/System-IO.html#v:getLine" title="System.IO">getLine</a></code> and copy-paste:</p><pre>{-# LANGUAGE ScopedTypeVariables #-}</pre><pre>import Data.Proxy     (Proxy (..))
import Data.Text      as T
import Data.Text.IO   as T
import System.Exit    (exitFailure)
import System.Info    (os)
import System.Process (rawSystem)</pre><pre>redirectPrompt :: AllowScopes (s :: [Symbol]) =&gt; OAuthClient -&gt; proxy s -&gt; IO (OAuthCode s)
redirectPrompt c p = do
  let url = formURL c p
  T.putStrLn $ &quot;Opening URL &quot; `T.append` url
  _ &lt;- case os of
    &quot;darwin&quot; -&gt; rawSystem &quot;open&quot;     [unpack url]
    &quot;linux&quot;  -&gt; rawSystem &quot;xdg-open&quot; [unpack url]
    _        -&gt; T.putStrLn &quot;Unsupported OS&quot; &gt;&gt; exitFailure
  T.putStrLn &quot;Please input the authorisation code: &quot;
  OAuthCode &lt;$&gt; T.getLine</pre><p>This ensures the scopes passed to <code><a href="Network-Google-Auth-InstalledApplication.html#v:formURL" title="Network.Google.Auth.InstalledApplication">formURL</a></code> and the type of <code><a href="Network-Google-Auth.html#t:OAuthCode" title="Network.Google.Auth">OAuthCode</a></code> <code>s</code>
 are correct.</p></div></div><a href="#g:1" id="g:1"><h1>Forming the URL</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:AccessType" class="def">AccessType</a> <a href="src/Network.Google.Auth.InstalledApplication.html#AccessType" class="link">Source</a> <a href="#t:AccessType" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Online" class="def">Online</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Offline" class="def">Offline</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:AccessType" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:AccessType:Eq:1"></span> <a href="../base-4.11.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a></span> <a href="src/Network.Google.Auth.InstalledApplication.html#line-85" class="link">Source</a> <a href="#t:AccessType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:AccessType:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Network-Google-Auth-InstalledApplication.html">Network.Google.Auth.InstalledApplication</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; <a href="../base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; <a href="../base-4.11.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:AccessType:Show:2"></span> <a href="../base-4.11.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a></span> <a href="src/Network.Google.Auth.InstalledApplication.html#line-85" class="link">Source</a> <a href="#t:AccessType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:AccessType:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Network-Google-Auth-InstalledApplication.html">Network.Google.Auth.InstalledApplication</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.11.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; <a href="../base-4.11.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; <a href="../base-4.11.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a>] -&gt; <a href="../base-4.11.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:redirectURI" class="def">redirectURI</a> :: <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a> <a href="src/Network.Google.Auth.InstalledApplication.html#redirectURI" class="link">Source</a> <a href="#v:redirectURI" class="selflink">#</a></p><div class="doc"><p>The redirection URI used in <code><a href="Network-Google-Auth-InstalledApplication.html#v:formURL" title="Network.Google.Auth.InstalledApplication">formURL</a></code>: <code>urn:ietf:wg:oauth:2.0:oob</code>.</p></div></div><div class="top"><p class="src"><a id="v:formURL" class="def">formURL</a> :: <a href="Network-Google-Auth-Scope.html#t:AllowScopes" title="Network.Google.Auth.Scope">AllowScopes</a> (s :: [<a href="../base-4.11.1.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>]) =&gt; <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; proxy s -&gt; <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a> <a href="src/Network.Google.Auth.InstalledApplication.html#formURL" class="link">Source</a> <a href="#v:formURL" class="selflink">#</a></p><div class="doc"><p>Given an <code><a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a></code> and a list of scopes to authorize,
 construct a URL that can be used to obtain the <code><a href="Network-Google-Auth.html#t:OAuthCode" title="Network.Google.Auth">OAuthCode</a></code>.</p><p><em>See:</em> <a href="https://developers.google.com/accounts/docs/OAuth2InstalledApp#formingtheurl">Forming the URL</a>.</p></div></div><div class="top"><p class="src"><a id="v:formAccessTypeURL" class="def">formAccessTypeURL</a> :: <a href="Network-Google-Auth-Scope.html#t:AllowScopes" title="Network.Google.Auth.Scope">AllowScopes</a> (s :: [<a href="../base-4.11.1.0/GHC-TypeLits.html#t:Symbol" title="GHC.TypeLits">Symbol</a>]) =&gt; <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; proxy s -&gt; <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a> <a href="src/Network.Google.Auth.InstalledApplication.html#formAccessTypeURL" class="link">Source</a> <a href="#v:formAccessTypeURL" class="selflink">#</a></p><div class="doc"><p><code><a href="Network-Google-Auth-InstalledApplication.html#v:formURL" title="Network.Google.Auth.InstalledApplication">formURL</a></code> for <code><a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a></code></p><p><em>See:</em> <code>formUrl</code>.</p></div></div><div class="top"><p class="src"><a id="v:formURLWith" class="def">formURLWith</a> :: <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; [<a href="Network-Google-Auth.html#t:OAuthScope" title="Network.Google.Auth">OAuthScope</a>] -&gt; <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a> <a href="src/Network.Google.Auth.InstalledApplication.html#formURLWith" class="link">Source</a> <a href="#v:formURLWith" class="selflink">#</a></p><div class="doc"><p>Form a URL using <code><a href="Network-Google-Auth.html#t:OAuthScope" title="Network.Google.Auth">OAuthScope</a></code> values.</p><p><em>See:</em> <code><a href="Network-Google-Auth-InstalledApplication.html#v:formURL" title="Network.Google.Auth.InstalledApplication">formURL</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:formAccessTypeURLWith" class="def">formAccessTypeURLWith</a> :: <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a> -&gt; [<a href="Network-Google-Auth.html#t:OAuthScope" title="Network.Google.Auth">OAuthScope</a>] -&gt; <a href="../gogol-core-0.3.0/Network-Google-Prelude.html#t:Text" title="Network.Google.Prelude">Text</a> <a href="src/Network.Google.Auth.InstalledApplication.html#formAccessTypeURLWith" class="link">Source</a> <a href="#v:formAccessTypeURLWith" class="selflink">#</a></p><div class="doc"><p><code><a href="Network-Google-Auth-InstalledApplication.html#v:formURLWith" title="Network.Google.Auth.InstalledApplication">formURLWith</a></code> for <code><a href="Network-Google-Auth-InstalledApplication.html#t:AccessType" title="Network.Google.Auth.InstalledApplication">AccessType</a></code></p><p><em>See:</em> <code><a href="Network-Google-Auth-InstalledApplication.html#v:formURLWith" title="Network.Google.Auth.InstalledApplication">formURLWith</a></code>.</p></div></div><a href="#g:2" id="g:2"><h1>Internal Exchange and Refresh</h1></a><div class="top"><p class="src"><a id="v:exchangeCode" class="def">exchangeCode</a> :: (<a href="../base-4.11.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, MonadCatch m) =&gt; <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth.html#t:OAuthCode" title="Network.Google.Auth">OAuthCode</a> s -&gt; <a href="Network-Google.html#t:Logger" title="Network.Google">Logger</a> -&gt; Manager -&gt; m (<a href="Network-Google-Auth.html#t:OAuthToken" title="Network.Google.Auth">OAuthToken</a> s) <a href="src/Network.Google.Auth.InstalledApplication.html#exchangeCode" class="link">Source</a> <a href="#v:exchangeCode" class="selflink">#</a></p><div class="doc"><p>Exchange <code><a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a></code> details and the received <code><a href="Network-Google-Auth.html#t:OAuthCode" title="Network.Google.Auth">OAuthCode</a></code> for a new
 <code><a href="Network-Google-Auth.html#t:OAuthToken" title="Network.Google.Auth">OAuthToken</a></code>.</p><p><em>See:</em> <a href="https://developers.google.com/accounts/docs/OAuth2InstalledApp#handlingtheresponse">Exchanging the code</a>.</p></div></div><div class="top"><p class="src"><a id="v:refreshToken" class="def">refreshToken</a> :: (<a href="../base-4.11.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, MonadCatch m) =&gt; <a href="Network-Google-Auth.html#t:OAuthClient" title="Network.Google.Auth">OAuthClient</a> -&gt; <a href="Network-Google-Auth.html#t:OAuthToken" title="Network.Google.Auth">OAuthToken</a> s -&gt; <a href="Network-Google.html#t:Logger" title="Network.Google">Logger</a> -&gt; Manager -&gt; m (<a href="Network-Google-Auth.html#t:OAuthToken" title="Network.Google.Auth">OAuthToken</a> s) <a href="src/Network.Google.Auth.InstalledApplication.html#refreshToken" class="link">Source</a> <a href="#v:refreshToken" class="selflink">#</a></p><div class="doc"><p>Perform a refresh to obtain a valid <code><a href="Network-Google-Auth.html#t:OAuthToken" title="Network.Google.Auth">OAuthToken</a></code> with a new expiry time.</p><p><em>See:</em> <a href="https://developers.google.com/accounts/docs/OAuth2InstalledApp#refresh">Refreshing tokens</a>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.20.0</p></div></body></html>